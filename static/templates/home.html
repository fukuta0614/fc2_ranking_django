{% extends 'base.html' %}


{% block content %}
    <div class="container">
        <h1>fc2 movies!</h1>
          <form method="get" action="">
              <br/>
              <!--{% csrf_token %}-->
              <p>
                  <input type="text" class="form-control" placeholder="input some word" name="query"><br/>
                  <input class="btn btn-primary btn-lg" type="submit" value="search&raquo;">
              </p>
          </form>

      </div>
{% endblock %}
{% load private %}

{% block content2 %}
    {% if tag %}
        <p>タグ 「{{tag}}」 の検索結果</p>
    {% endif %}
    {% if query %}
        <p>キーワード 「{{query}}」 の検索結果</p>
    {% endif %}

    <table class="table table-striped" id="url_table">
      <thead>
        <tr>
            <th>Rank</th>
            <th>Thumbnail</th>
            <th>Fav</th>
            <th>Title</th>
            <th>Url</th>
            <th>Playtime</th>
            <th>Download</th>

        </tr>
      </thead>
      <tbody>

      {% for movie in movies %}
            <tr>
                <th scope="row">{{ forloop.counter|add:num }}</th>
                <td><img src="{{movie.thumbnail}}"></td>
                <td>{{ movie.fav }}</td>
                <td>{{ movie.title}}</td>
                <td><a href="{{movie.url}}" target="_blank">{{movie.url}}</a></td>
                <td>{{movie.play_time</td>
                <td>
                    <form action="{% url 'download' %}" method="get">
                        <input id="submit" type="button" value="Download" name="{{movie|private:'_id'}}"/>
                    </form>
                </td>
            </tr>
        {% endfor %}
      </tbody>
    </table>
    <nav>
      <ul class="pagination">
        <li>
            {% if movies.has_previous %}
                <a href="?page=1" aria-label="Previous">
                    <span aria-hidden="true">&laquo;</span>
                </a>
            {% else %}
                <span aria-hidden="true">&laquo;</span>
            {% endif %}
        </li>
        <li><a href="?page={{movies.number|add:-2}}">{{movies.number|add:-2}}</a></li>
        <li><a href="?page={{movies.number|add:-1}}">{{movies.number|add:-1}}</a></li>
        <li><a href="#">{{movies.number}}</a></li>
        <li><a href="?page={{movies.number|add:1}}">{{movies.number|add:1}}</a></li>
        <li><a href="?page={{movies.number|add:2}}">{{movies.number|add:2}}</a></li>
        <li>
            {% if movies.has_next %}
                <a href="?page={{ movies.paginator.num_pages }}" aria-label="Next">
                    <span aria-hidden="true">&raquo;</span>
                </a>
            {% else %}
                <span aria-hidden="true">&raquo;</span>
            {% endif %}
        </li>
      </ul>
    </nav>


{% endblock %}

<!--<h1>Join Now</h1>-->
    <!--<form method="POST" action="">-->
        <!--{% csrf_token %}-->
        <!--{{ form.as_p }}-->

        <!--<input type="submit">-->
    <!--</form>-->